# Python-Specific AI Rules

Эти правила дополняют Global AI Rules и применяются ко всему Python-коду.

---

## 1. Назначение Python-кода

- Python используется для:
  - автоматизации,
  - админских скриптов,
  - утилит,
  - glue-кода.
- Это **не application development** и не библиотека общего назначения.

## 2. Общий стиль

- Предпочитай:
  - простой процедурный код,
  - функции вместо классов (если нет явной причины).
- Не используй сложные паттерны (DI, Factory, MVC и т.п.).
- Один файл = одна задача.

## 3. Читаемость важнее всего

- Код должен быть понятен **через 6 месяцев без контекста**.
- Имена:
  - говорящие,
  - без сокращений типа `cfg`, `mgr`, `util` (если не очевидно).
- Лучше 10 строк понятного кода, чем 3 строки «умного».

## 4. Версия Python

- Предполагай Python **3.9+**, если не указано иное.
- Не используй устаревшие конструкции.
- Не используй экспериментальные фичи без причины.

## 5. Импорты и зависимости

- Используй стандартную библиотеку, если возможно.
- Минимизируй внешние зависимости.
- Если нужна зависимость:
  - укажи зачем,
  - укажи как установить.
- Импорты:
  - стандартная библиотека,
  - затем сторонние,
  - затем локальные.

## 6. Обработка ошибок

- Не используй `except Exception:` без объяснения.
- Обрабатывай только ожидаемые ошибки.
- Ошибка должна:
  - быть понятной,
  - содержать контекст.
- Скрипт должен **корректно завершаться**, а не падать стек-трейсом без объяснений.

## 7. Логирование

- Предпочитай `logging`, а не `print`.
- Уровни логов должны быть осмысленными:
  - INFO — нормальная работа,
  - WARNING — что-то странное, но не критично,
  - ERROR — ошибка.
- Логи должны помогать понять **что произошло и где**.

## 8. Конфигурация

- Не хардкодь:
  - пути,
  - адреса,
  - порты,
  - креды.
- Используй:
  - аргументы командной строки,
  - переменные окружения,
  - конфиг-файлы.
- Значения по умолчанию должны быть безопасными.

## 9. Работа с ОС

- Всегда учитывай:
  - права доступа,
  - пользователя выполнения,
  - окружение.
- Пути:
  - используй `pathlib`, а не строковую конкатенацию.
- Внешние команды:
  - через `subprocess`,
  - без `shell=True`, если не нужно.

## 10. Структура скрипта

- Используй:
  - `main()` функцию,
  - `if __name__ == "__main__":`
- Логика должна читаться сверху вниз.
- Минимум глобальных переменных.

## 11. Докстринги и комментарии

- Добавляй docstring:
  - для скрипта,
  - для нетривиальных функций.
- Комментарии объясняют **почему**, а не **что**.

## 12. Тесты и отладка

- Для простых скриптов тесты не обязательны.
- Если логика сложная — предложи простой способ проверки.
- Отладка:
  - через логи,
  - а не временные `print()`.

## 13. Безопасность

- Никогда не логируй:
  - пароли,
  - токены,
  - ключи.
- Файлы с секретами:
  - с ограниченными правами.
- Сетевые операции:
  - с таймаутами.

## 14. Цель Python-кода

Python-код должен быть:
- понятным,
- предсказуемым,
- безопасным,
- удобным для сопровождения администратором.
