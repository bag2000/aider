Задание: Реорганизация системы бэкапа на Bash в модульную структуру.
У меня есть скрипт restic_backup.sh. Нужно разделить его на три файла: init.conf (общие настройки), restic_backup.sh (модуль бэкапа), restic_forget.sh (модуль чистки бэкапа) и main.sh (точка входа).

1. Используй переменные из файла init.conf 

2. Перепиши restic_backup.sh:
Оформи логику в функцию run_restic_backup()
Добавь в команду restic backup параметры --cache-dir, --exclude-file и --pack-size, используя переменные.

3. Напиши restic_forget.sh
Оформи логику в функцию run_restic_forget().
Добавь в команду restic forget параметры --prune, --cache-dir и --pack-size, и retention используя переменные.

4. Создай main.sh (главный диспетчер):
Определи переменную BASE_DIR=$(dirname "$(readlink -f "$0")").
Подключи (source) init.conf, restic_forget.sh и restic_backup.sh относительно BASE_DIR.
Создай общую функцию log(), которая пишет в файл $LOG_FILE и выводит текст в терминал.
Добавь проверку на запуск от root.

Требования к качеству:
Используй set -e и set -o pipefail.
Все пути внутри скриптов (к конфигам, логам и файлам исключений) должны строиться строго через ${BASE_DIR}/имя_файла.
Все пути внутри скриптов должны строиться на основе BASE_DIR, чтобы систему можно было запускать из любого места или через cron.
Используй массивы bash для передачи аргументов в команды.
Экспортируй необходимые переменные (REPO, PASSWORD_FILE) внутри функций, чтобы restic их видел.