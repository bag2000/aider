# ==============================================================================
# КОНФИГУРАЦИЯ СКРИПТА РЕЗЕРВНОГО КОПИРОВАНИЯ БД
# ==============================================================================

# Общие настройки хранилища и идентификации
general:
  backup_path: "/bak/db"         # Хранилище копи баз данных
  server_name: "server-01"       # Имя сервера
  base_url: "https://healthchecks.io/api/v1/checks/"   # Базовый URL API Healthchecks
  ping_base: "https://hc-ping.com"                     # Базовый URL для отправки ping-сигналов

# Список задач
tasks:
  # ----------------------------------------------------------------------------
  # PostgreSQL (Локально)
  # ----------------------------------------------------------------------------
  - name: "Postgres Local Main"
    slug: "db-backup-postgres-1" # Уникальный ID для healthcheck и именования
    db_type: "postgres"
    container_name: ""           # Пусто -> выполнение через sudo
    bin_path: "/usr/local/pgsql/bin/pg_dumpall"
    args: ""
    db_user: "postgres"
    sys_user: "postgres"
    output_file: "dump_alldb_pg.sql.gz"
    enable: true

  # ----------------------------------------------------------------------------
  # MySQL (Локально)
  # ----------------------------------------------------------------------------
  - name: "MySQL Local Main"
    slug: "db-backup-mysql-1"
    db_type: "mysql"
    container_name: ""
    bin_path: "/usr/bin/mysqldump"
    args: "--all-databases"
    db_user: "user_mysql"
    sys_user: "root"
    output_file: "dump_alldb_mysql.sql.gz"
    enable: false

  # ----------------------------------------------------------------------------
  # PostgreSQL (Docker)
  # ----------------------------------------------------------------------------
  - name: "Postgres Docker Container"
    slug: "db-backup-postgres-docker-1"
    db_type: "postgres"
    container_name: "my_postgres_container" # Не пусто выполнение в соответствующем контейнере
    bin_path: "pg_dumpall"
    args: ""
    db_user: "postgres"
    sys_user: "postgres"
    output_file: "dump_docker_alldb_pg.sql.gz"
    enable: false
